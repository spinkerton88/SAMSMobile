# Store Directory Search Application

A web application for searching and displaying store details with support for both CSV data and live API data.

## Features

- Search stores by multiple criteria:
  - Store Number
  - Store Name
  - City
  - Market
  - Market Team
  - Country/Region

- Display comprehensive store details:
  - Full address information
  - Store hierarchy (Country, Market Team, Market, Store Type, Status)
  - Leadership team with contact information
  - Store contact details and website

## Files

- `index.html` - Main application interface
- `styles.css` - Styling and layout
- `app.js` - Frontend logic for search and display
- `fetch-stores.js` - Node.js script to fetch live data from API
- `StoreDirectory_Stores.csv` - CSV data source (fallback)
- `stores-live-data.json` - Live API data (generated by fetch-stores.js)

## Quick Start

### Option 1: Use with CSV Data

1. Open `index.html` in a web browser
2. The app will automatically load data from `StoreDirectory_Stores.csv`
3. Use the search filters to find stores

### Option 2: Fetch Live API Data

1. Ensure you have Node.js installed
2. Run the fetch script:
   ```bash
   node fetch-stores.js
   ```
3. This will:
   - Read all store numbers from the CSV
   - Fetch live details for each store from the API
   - Save results to `stores-live-data.json`
   - Display progress and error information

4. Open `index.html` in a web browser
5. The app will automatically use the live API data

## How It Works

### Data Loading Priority

The web app tries to load data in this order:
1. **Live API Data** (`stores-live-data.json`) - if available
2. **CSV Data** (`StoreDirectory_Stores.csv`) - fallback

The current data source is displayed in the status text.

### API Integration

The `fetch-stores.js` script uses the Store Details API:
- **Endpoint**: `https://sams.corp.apple.com/{storeNumber}/storedetails`
- **Method**: GET
- **Authentication**: Uses cookies from the CURL command
- **Rate Limiting**: 100ms delay between requests to avoid overloading the server

### Search Functionality

- All search filters support partial matching (case-insensitive)
- Multiple filters can be combined for refined results
- Press Enter or click Search to execute
- Clear button resets all filters

## API Authentication

The fetch script uses authentication cookies found in `Store Details.rtf`. These cookies may expire over time. If you encounter authentication errors:

1. Log into the SAMS system in your browser
2. Open Developer Tools (Network tab)
3. Make a request to the store details endpoint
4. Copy the Cookie header from the request
5. Update the `headers.Cookie` value in `fetch-stores.js`

## Notes

- The fetch script includes basic error handling
- Failed requests are logged to `fetch-errors.json`
- Progress is displayed during the fetch process
- The web app works offline with cached data
